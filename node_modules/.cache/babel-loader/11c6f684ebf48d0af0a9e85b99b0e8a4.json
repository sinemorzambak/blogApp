{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sinem Morzambak\\\\Desktop\\\\sinem.morzambak\\\\Final-Project\\\\src\\\\pages\\\\acricle\\\\CreateArticle.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport ArticleForm from './components/ArticleForm';\nimport useFetch from '../../hooks/useFetch';\nimport { useNavigate } from 'react-router-dom';\nimport { CurrentUserContext } from '../../context/currentUser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreateArticle = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const apiUrl = '/articles';\n  const [{\n    response,\n    error\n  }, doFetch] = useFetch(apiUrl);\n  const [isSuccessSubmit, setIsSuccessSubmit] = useState(false);\n  const [currentUserState] = useContext(CurrentUserContext);\n  const initialValue = {\n    title: '',\n    description: '',\n    body: '',\n    tagList: []\n  };\n  useEffect(() => {\n    if (currentUserState.isLoggedIn === false) {\n      navigate('/');\n    }\n\n    if (!response) {\n      return;\n    }\n\n    setIsSuccessSubmit(true);\n\n    if (isSuccessSubmit) {\n      navigate(`/articles/${response.article.slug}`);\n    }\n  }, [response, isSuccessSubmit, navigate, currentUserState.isLoggedIn]);\n\n  const handleSubmit = article => {\n    doFetch({\n      method: 'post',\n      data: {\n        article\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(ArticleForm, {\n      error: error && error.errors || {},\n      initialValue: initialValue,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 3\n  }, this);\n};\n\n_s(CreateArticle, \"ALvUxn97aB5gcaTCv0RTtCSHqkQ=\", false, function () {\n  return [useNavigate, useFetch];\n});\n\n_c = CreateArticle;\nexport default CreateArticle;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateArticle\");","map":{"version":3,"names":["React","useContext","useEffect","useState","ArticleForm","useFetch","useNavigate","CurrentUserContext","CreateArticle","navigate","apiUrl","response","error","doFetch","isSuccessSubmit","setIsSuccessSubmit","currentUserState","initialValue","title","description","body","tagList","isLoggedIn","article","slug","handleSubmit","method","data","errors"],"sources":["C:/Users/Sinem Morzambak/Desktop/sinem.morzambak/Final-Project/src/pages/acricle/CreateArticle.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport ArticleForm from './components/ArticleForm'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\n\r\nconst CreateArticle = () => {\r\n\tconst navigate = useNavigate()\r\n\tconst apiUrl = '/articles'\r\n\tconst [{ response, error }, doFetch] = useFetch(apiUrl)\r\n\tconst [isSuccessSubmit, setIsSuccessSubmit] = useState(false)\r\n\tconst [currentUserState] = useContext(CurrentUserContext)\r\n\r\n\tconst initialValue = {\r\n\t\ttitle: '',\r\n\t\tdescription: '',\r\n\t\tbody: '',\r\n\t\ttagList: [],\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUserState.isLoggedIn === false) {\r\n\t\t\tnavigate('/')\r\n\t\t}\r\n\t\tif (!response) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsSuccessSubmit(true)\r\n\t\tif (isSuccessSubmit) {\r\n\t\t\tnavigate(`/articles/${response.article.slug}`)\r\n\t\t}\r\n\t}, [response, isSuccessSubmit, navigate, currentUserState.isLoggedIn])\r\n\r\n\tconst handleSubmit = (article) => {\r\n\t\tdoFetch({\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\tarticle,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ArticleForm error={(error && error.errors) || {}} initialValue={initialValue} onSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default CreateArticle\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,kBAAT,QAAmC,2BAAnC;;;AAEA,MAAMC,aAAa,GAAG,MAAM;EAAA;;EAC3B,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAMI,MAAM,GAAG,WAAf;EACA,MAAM,CAAC;IAAEC,QAAF;IAAYC;EAAZ,CAAD,EAAsBC,OAAtB,IAAiCR,QAAQ,CAACK,MAAD,CAA/C;EACA,MAAM,CAACI,eAAD,EAAkBC,kBAAlB,IAAwCZ,QAAQ,CAAC,KAAD,CAAtD;EACA,MAAM,CAACa,gBAAD,IAAqBf,UAAU,CAACM,kBAAD,CAArC;EAEA,MAAMU,YAAY,GAAG;IACpBC,KAAK,EAAE,EADa;IAEpBC,WAAW,EAAE,EAFO;IAGpBC,IAAI,EAAE,EAHc;IAIpBC,OAAO,EAAE;EAJW,CAArB;EAOAnB,SAAS,CAAC,MAAM;IACf,IAAIc,gBAAgB,CAACM,UAAjB,KAAgC,KAApC,EAA2C;MAC1Cb,QAAQ,CAAC,GAAD,CAAR;IACA;;IACD,IAAI,CAACE,QAAL,EAAe;MACd;IACA;;IACDI,kBAAkB,CAAC,IAAD,CAAlB;;IACA,IAAID,eAAJ,EAAqB;MACpBL,QAAQ,CAAE,aAAYE,QAAQ,CAACY,OAAT,CAAiBC,IAAK,EAApC,CAAR;IACA;EACD,CAXQ,EAWN,CAACb,QAAD,EAAWG,eAAX,EAA4BL,QAA5B,EAAsCO,gBAAgB,CAACM,UAAvD,CAXM,CAAT;;EAaA,MAAMG,YAAY,GAAIF,OAAD,IAAa;IACjCV,OAAO,CAAC;MACPa,MAAM,EAAE,MADD;MAEPC,IAAI,EAAE;QACLJ;MADK;IAFC,CAAD,CAAP;EAMA,CAPD;;EASA,oBACC;IAAA,uBACC,QAAC,WAAD;MAAa,KAAK,EAAGX,KAAK,IAAIA,KAAK,CAACgB,MAAhB,IAA2B,EAA/C;MAAmD,YAAY,EAAEX,YAAjE;MAA+E,QAAQ,EAAEQ;IAAzF;MAAA;MAAA;MAAA;IAAA;EADD;IAAA;IAAA;IAAA;EAAA,QADD;AAKA,CAzCD;;GAAMjB,a;UACYF,W,EAEsBD,Q;;;KAHlCG,a;AA2CN,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}