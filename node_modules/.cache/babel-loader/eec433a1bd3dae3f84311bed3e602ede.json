{"ast":null,"code":"import _slicedToArray from\"C:/Users/Sinem Morzambak/Desktop/my-OBSS-proejct/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import useFetch from'../../hooks/useFetch';import{useNavigate,useParams}from'react-router-dom';import ArticleForm from'./components/ArticleForm';import{CurrentUserContext}from'../../context/currentUser';import{jsx as _jsx}from\"react/jsx-runtime\";var EditArticle=function EditArticle(){var _useParams=useParams(),slug=_useParams.slug;var apiUrl=\"/articles/\".concat(slug);var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSuccessSubmit=_useState2[0],setIsSuccessSubmit=_useState2[1];var _useFetch=useFetch(apiUrl),_useFetch2=_slicedToArray(_useFetch,2),_useFetch2$=_useFetch2[0],updateArticleResponse=_useFetch2$.response,updateArticleError=_useFetch2$.error,doUpdateArticle=_useFetch2[1];var _useFetch3=useFetch(apiUrl),_useFetch4=_slicedToArray(_useFetch3,2),fetchArticleResponse=_useFetch4[0].response,doFetchArticle=_useFetch4[1];var _useContext=useContext(CurrentUserContext),_useContext2=_slicedToArray(_useContext,1),currentUserState=_useContext2[0];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),initialValues=_useState4[0],setInitialValues=_useState4[1];var handleSubmit=function handleSubmit(article){doUpdateArticle({method:'put',data:{article:article}});};useEffect(function(){doFetchArticle();},[doFetchArticle]);useEffect(function(){if(!fetchArticleResponse){return;}setInitialValues({title:fetchArticleResponse.article.title,description:fetchArticleResponse.article.description,body:fetchArticleResponse.article.body,tagList:fetchArticleResponse.article.tagList});},[fetchArticleResponse]);useEffect(function(){if(!updateArticleResponse){return;}setIsSuccessSubmit(true);},[updateArticleResponse]);useEffect(function(){if(isSuccessSubmit){navigate(\"/articles/\".concat(updateArticleResponse.article.slug));}if(currentUserState.isLoggedIn===null){return null;}if(currentUserState.isLoggedIn===false){navigate('/');}},[navigate,isSuccessSubmit]);return/*#__PURE__*/_jsx(ArticleForm,{onSubmit:handleSubmit,error:updateArticleError&&updateArticleError.errors||{},initialValue:initialValues,slug:slug});};export default EditArticle;","map":{"version":3,"names":["React","useContext","useEffect","useState","useFetch","useNavigate","useParams","ArticleForm","CurrentUserContext","EditArticle","slug","apiUrl","navigate","isSuccessSubmit","setIsSuccessSubmit","updateArticleResponse","response","updateArticleError","error","doUpdateArticle","fetchArticleResponse","doFetchArticle","currentUserState","initialValues","setInitialValues","handleSubmit","article","method","data","title","description","body","tagList","isLoggedIn","errors"],"sources":["C:/Users/Sinem Morzambak/Desktop/my-OBSS-proejct/src/pages/acricle/EditArticle.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport ArticleForm from './components/ArticleForm'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\n\r\nconst EditArticle = () => {\r\n\tconst { slug } = useParams()\r\n\tconst apiUrl = `/articles/${slug}`\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst [isSuccessSubmit, setIsSuccessSubmit] = useState(false)\r\n\tconst [{ response: updateArticleResponse, error: updateArticleError }, doUpdateArticle] = useFetch(apiUrl)\r\n\tconst [{ response: fetchArticleResponse }, doFetchArticle] = useFetch(apiUrl)\r\n\tconst [currentUserState] = useContext(CurrentUserContext)\r\n\tconst [initialValues, setInitialValues] = useState(null)\r\n\r\n\tconst handleSubmit = (article) => {\r\n\t\tdoUpdateArticle({\r\n\t\t\tmethod: 'put',\r\n\t\t\tdata: {\r\n\t\t\t\tarticle,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdoFetchArticle()\r\n\t}, [doFetchArticle])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!fetchArticleResponse) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetInitialValues({\r\n\t\t\ttitle: fetchArticleResponse.article.title,\r\n\t\t\tdescription: fetchArticleResponse.article.description,\r\n\t\t\tbody: fetchArticleResponse.article.body,\r\n\t\t\ttagList: fetchArticleResponse.article.tagList,\r\n\t\t})\r\n\t}, [fetchArticleResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!updateArticleResponse) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsSuccessSubmit(true)\r\n\t}, [updateArticleResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccessSubmit) {\r\n\t\t\tnavigate(`/articles/${updateArticleResponse.article.slug}`)\r\n\t\t}\r\n\t\tif (currentUserState.isLoggedIn === null) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tif (currentUserState.isLoggedIn === false) {\r\n\t\t\tnavigate('/')\r\n\t\t}\r\n\t}, [navigate, isSuccessSubmit])\r\n\r\n\r\n\treturn (\r\n\t\t<ArticleForm\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\terror={(updateArticleError && updateArticleError.errors) || {}}\r\n\t\t\tinitialValue={initialValues}\r\n\t\t\tslug={slug}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default EditArticle\r\n"],"mappings":"sIAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,OAASC,WAAT,CAAsBC,SAAtB,KAAuC,kBAAvC,CACA,MAAOC,YAAP,KAAwB,0BAAxB,CACA,OAASC,kBAAT,KAAmC,2BAAnC,C,2CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACzB,eAAiBH,SAAS,EAA1B,CAAQI,IAAR,YAAQA,IAAR,CACA,GAAMC,OAAM,qBAAgBD,IAAhB,CAAZ,CACA,GAAME,SAAQ,CAAGP,WAAW,EAA5B,CAEA,cAA8CF,QAAQ,CAAC,KAAD,CAAtD,wCAAOU,eAAP,eAAwBC,kBAAxB,eACA,cAA0FV,QAAQ,CAACO,MAAD,CAAlG,kEAAmBI,qBAAnB,aAASC,QAAT,CAAiDC,kBAAjD,aAA0CC,KAA1C,CAAuEC,eAAvE,eACA,eAA6Df,QAAQ,CAACO,MAAD,CAArE,yCAAmBS,oBAAnB,eAASJ,QAAT,CAA2CK,cAA3C,eACA,gBAA2BpB,UAAU,CAACO,kBAAD,CAArC,4CAAOc,gBAAP,iBACA,eAA0CnB,QAAQ,CAAC,IAAD,CAAlD,yCAAOoB,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,OAAD,CAAa,CACjCP,eAAe,CAAC,CACfQ,MAAM,CAAE,KADO,CAEfC,IAAI,CAAE,CACLF,OAAO,CAAPA,OADK,CAFS,CAAD,CAAf,CAMA,CAPD,CASAxB,SAAS,CAAC,UAAM,CACfmB,cAAc,GACd,CAFQ,CAEN,CAACA,cAAD,CAFM,CAAT,CAIAnB,SAAS,CAAC,UAAM,CACf,GAAI,CAACkB,oBAAL,CAA2B,CAC1B,OACA,CAEDI,gBAAgB,CAAC,CAChBK,KAAK,CAAET,oBAAoB,CAACM,OAArB,CAA6BG,KADpB,CAEhBC,WAAW,CAAEV,oBAAoB,CAACM,OAArB,CAA6BI,WAF1B,CAGhBC,IAAI,CAAEX,oBAAoB,CAACM,OAArB,CAA6BK,IAHnB,CAIhBC,OAAO,CAAEZ,oBAAoB,CAACM,OAArB,CAA6BM,OAJtB,CAAD,CAAhB,CAMA,CAXQ,CAWN,CAACZ,oBAAD,CAXM,CAAT,CAaAlB,SAAS,CAAC,UAAM,CACf,GAAI,CAACa,qBAAL,CAA4B,CAC3B,OACA,CACDD,kBAAkB,CAAC,IAAD,CAAlB,CACA,CALQ,CAKN,CAACC,qBAAD,CALM,CAAT,CAOAb,SAAS,CAAC,UAAM,CACf,GAAIW,eAAJ,CAAqB,CACpBD,QAAQ,qBAAcG,qBAAqB,CAACW,OAAtB,CAA8BhB,IAA5C,EAAR,CACA,CACD,GAAIY,gBAAgB,CAACW,UAAjB,GAAgC,IAApC,CAA0C,CACzC,MAAO,KAAP,CACA,CACD,GAAIX,gBAAgB,CAACW,UAAjB,GAAgC,KAApC,CAA2C,CAC1CrB,QAAQ,CAAC,GAAD,CAAR,CACA,CACD,CAVQ,CAUN,CAACA,QAAD,CAAWC,eAAX,CAVM,CAAT,CAaA,mBACC,KAAC,WAAD,EACC,QAAQ,CAAEY,YADX,CAEC,KAAK,CAAGR,kBAAkB,EAAIA,kBAAkB,CAACiB,MAA1C,EAAqD,EAF7D,CAGC,YAAY,CAAEX,aAHf,CAIC,IAAI,CAAEb,IAJP,EADD,CAQA,CAjED,CAmEA,cAAeD,YAAf"},"metadata":{},"sourceType":"module"}