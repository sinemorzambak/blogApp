{"ast":null,"code":"import _objectSpread from\"C:/Users/Sinem Morzambak/Desktop/my-OBSS-proejct/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Sinem Morzambak/Desktop/my-OBSS-proejct/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{CurrentUserContext}from'../../context/currentUser';import useFetch from'../../hooks/useFetch';import useStorage from'../../hooks/useStorage';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Settings=function Settings(){var apiUrl='/user';var navigate=useNavigate();var _useContext=useContext(CurrentUserContext),_useContext2=_slicedToArray(_useContext,2),currentUserState=_useContext2[0],dispatch=_useContext2[1];var _useFetch=useFetch(apiUrl),_useFetch2=_slicedToArray(_useFetch,2),_useFetch2$=_useFetch2[0],response=_useFetch2$.response,error=_useFetch2$.error,doFetch=_useFetch2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),bio=_useState6[0],setBio=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var _useStorage=useStorage('token'),_useStorage2=_slicedToArray(_useStorage,2),setToken=_useStorage2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();doFetch({method:'put',data:{user:_objectSpread(_objectSpread({},currentUserState.currentUser),{},{image:image,bio:bio,username:name,email:email,password:password})}});};var handleLogout=function handleLogout(e){e.preventDefault();setToken('');dispatch({type:'LOGOUT'});navigate('/');};useEffect(function(){if(!currentUserState.currentUser){return;}var currentUser=currentUserState.currentUser;setName(currentUser.username);setImage(currentUser.image);setBio(currentUser.bio);setEmail(currentUser.email);},[currentUserState.currentUser]);useEffect(function(){if(!response){return;}dispatch({type:'SET_AUTHORIZED',payload:response.user});navigate('/');},[response,dispatch,navigate]);return/*#__PURE__*/_jsx(\"div\",{className:\"settings-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3 col-xs-12\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xs-center\",children:\"Your settings\"}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg\",placeholder:\"URL of profile picture\",value:image,onChange:function onChange(e){return setImage(e.target.value);}})}),/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg\",placeholder:\"Username\",value:name,onChange:function onChange(e){return setName(e.target.value);}})}),/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control form-control-lg\",rows:\"8\",placeholder:\"Short bio\",value:bio,onChange:function onChange(e){return setBio(e.target.value);}})}),/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg\",placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"fieldset\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form-group\",style:{display:'flex',justifyContent:'space-between',flexDirection:'row-reverse'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn pull-xs-right btn-primary\",onClick:handleSubmit,children:\"Update settings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn pull-xs-left btn-danger\",onClick:handleLogout,children:\"Logout\"})]})]})})]})})})});};export default Settings;","map":{"version":3,"names":["React","useContext","useEffect","useState","CurrentUserContext","useFetch","useStorage","useNavigate","Settings","apiUrl","navigate","currentUserState","dispatch","response","error","doFetch","image","setImage","name","setName","bio","setBio","email","setEmail","password","setPassword","setToken","handleSubmit","event","preventDefault","method","data","user","currentUser","username","handleLogout","e","type","payload","target","value","display","justifyContent","flexDirection"],"sources":["C:/Users/Sinem Morzambak/Desktop/my-OBSS-proejct/src/pages/profile/Settings.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport useStorage from '../../hooks/useStorage'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Settings = () => {\r\n\tconst apiUrl = '/user'\r\n\tconst navigate = useNavigate()\r\n\tconst [currentUserState, dispatch] = useContext(CurrentUserContext)\r\n\tconst [{ response, error }, doFetch] = useFetch(apiUrl)\r\n\tconst [image, setImage] = useState('')\r\n\tconst [name, setName] = useState('')\r\n\tconst [bio, setBio] = useState('')\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst [, setToken] = useStorage('token')\r\n\r\n\tconst handleSubmit = event => {\r\n\t\tevent.preventDefault()\r\n\t\tdoFetch({\r\n\t\t\tmethod: 'put',\r\n\t\t\tdata: {\r\n\t\t\t\tuser: {\r\n\t\t\t\t\t...currentUserState.currentUser,\r\n\t\t\t\t\timage,\r\n\t\t\t\t\tbio,\r\n\t\t\t\t\tusername: name,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleLogout = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetToken('')\r\n\t\tdispatch({ type: 'LOGOUT' })\r\n\t\tnavigate('/')\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!currentUserState.currentUser) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconst currentUser = currentUserState.currentUser\r\n\r\n\t\tsetName(currentUser.username)\r\n\t\tsetImage(currentUser.image)\r\n\t\tsetBio(currentUser.bio)\r\n\t\tsetEmail(currentUser.email)\r\n\t}, [currentUserState.currentUser])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!response) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tdispatch({ type: 'SET_AUTHORIZED', payload: response.user })\r\n\t\tnavigate('/')\r\n\t}, [response, dispatch, navigate])\r\n\r\n\treturn (\r\n\t\t<div className='settings-page'>\r\n\t\t\t<div className='container page'>\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-md-6 offset-md-3 col-xs-12'>\r\n\t\t\t\t\t\t<h1 className='text-xs-center'>Your settings</h1>\r\n\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t<fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input type='text'\r\n\t\t\t\t\t\t\t\t\t       className='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\t       placeholder='URL of profile picture'\r\n\t\t\t\t\t\t\t\t\t       value={image} onChange={(e) => setImage(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input type='text'\r\n\t\t\t\t\t\t\t\t\t       className='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\t       placeholder='Username'\r\n\t\t\t\t\t\t\t\t\t       value={name} onChange={(e) => setName(e.target.value)} />\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<textarea className='form-control form-control-lg' rows='8'\r\n\t\t\t\t\t\t\t\t\t          placeholder='Short bio' value={bio}\r\n\t\t\t\t\t\t\t\t\t          onChange={(e) => setBio(e.target.value)} />\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input type='text'\r\n\t\t\t\t\t\t\t\t\t       className='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\t       placeholder='Email'\r\n\t\t\t\t\t\t\t\t\t       value={email} onChange={(e) => setEmail(e.target.value)} />\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input type='text'\r\n\t\t\t\t\t\t\t\t\t       className='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\t       placeholder='Password'\r\n\t\t\t\t\t\t\t\t\t       value={password} onChange={(e) => setPassword(e.target.value)} />\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'\r\n\t\t\t\t\t\t\t\t          style={{\r\n\t\t\t\t\t\t\t\t\t          display: 'flex',\r\n\t\t\t\t\t\t\t\t\t          justifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\t\t          flexDirection: 'row-reverse',\r\n\t\t\t\t\t\t\t\t          }}>\r\n\t\t\t\t\t\t\t\t\t<button className='btn btn pull-xs-right btn-primary' onClick={handleSubmit}>Update\r\n\t\t\t\t\t\t\t\t\t\tsettings\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className='btn btn pull-xs-left btn-danger' onClick={handleLogout}>\r\n\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Settings"],"mappings":"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"},"metadata":{},"sourceType":"module"}