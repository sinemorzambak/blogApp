{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sinem Morzambak\\\\Desktop\\\\blogApp\\\\src\\\\pages\\\\auth\\\\Auth.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport useFetch from '../../hooks/useFetch';\nimport useStorage from '../../hooks/useStorage';\nimport { CurrentUserContext } from '../../context/currentUser';\nimport ErrorMessage from '../../components/ErrorMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Auth = () => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isSuccessSubmit, setIsSuccessSubmit] = useState(false);\n  const [, setToken] = useStorage('token');\n  const [, dispatch] = useContext(CurrentUserContext);\n  const location = useLocation();\n  const navigate = useNavigate();\n  const isLogin = location.pathname === '/login';\n  const pageTitle = isLogin ? 'Sign in' : 'Sign up';\n  const pageDesc = isLogin ? 'Need an account?' : 'Have an account?';\n  const pageLink = isLogin ? '/register' : '/login';\n  const apiUrl = isLogin ? '/users/login' : '/users';\n  const [{\n    isLoading,\n    response,\n    error\n  }, doFetch] = useFetch(apiUrl);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const user = isLogin ? {\n      email,\n      password\n    } : {\n      email,\n      password,\n      username\n    };\n    doFetch({\n      method: 'post',\n      data: {\n        user\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (!response) {\n      return;\n    }\n\n    setToken(response.user.token);\n    setIsSuccessSubmit(true);\n    dispatch({\n      type: 'SET_AUTHORIZED',\n      payload: response.user\n    });\n\n    if (isSuccessSubmit) {\n      return navigate('/');\n    }\n  }, [response, setToken, navigate, isSuccessSubmit, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 offset-md-3 col-xs-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-center\",\n            children: pageTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: pageLink,\n              children: pageDesc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n              error: error.errors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n              children: [!isLogin && /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  type: \"text\",\n                  className: \"form-control form-control-lg mt-3\",\n                  placeholder: \"Username\",\n                  value: username,\n                  onChange: e => setUsername(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  type: \"email\",\n                  className: \"form-control form-control-lg mt-3\",\n                  placeholder: \"Email\",\n                  value: email,\n                  onChange: e => setEmail(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  type: \"password\",\n                  className: \"form-control form-control-lg mt-3\",\n                  placeholder: \"Password\",\n                  value: password,\n                  onChange: e => setPassword(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary mt-3\",\n                type: \"submit\",\n                disabled: isLoading,\n                children: pageTitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Auth, \"2MXE61/EMFzux/lAQUCUv3sHYfI=\", false, function () {\n  return [useStorage, useLocation, useNavigate, useFetch];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useLocation","useNavigate","useFetch","useStorage","CurrentUserContext","ErrorMessage","Auth","email","setEmail","username","setUsername","password","setPassword","isSuccessSubmit","setIsSuccessSubmit","setToken","dispatch","location","navigate","isLogin","pathname","pageTitle","pageDesc","pageLink","apiUrl","isLoading","response","error","doFetch","handleSubmit","e","preventDefault","user","method","data","token","type","payload","errors","target","value"],"sources":["C:/Users/Sinem Morzambak/Desktop/blogApp/src/pages/auth/Auth.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport useStorage from '../../hooks/useStorage'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\nimport ErrorMessage from '../../components/ErrorMessage'\r\n\r\nconst Auth = () => {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [username, setUsername] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\r\n\tconst [isSuccessSubmit, setIsSuccessSubmit] = useState(false)\r\n\tconst [, setToken] = useStorage('token')\r\n\tconst [, dispatch] = useContext(CurrentUserContext)\r\n\r\n\tconst location = useLocation()\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst isLogin = location.pathname === '/login'\r\n\tconst pageTitle = isLogin ? 'Sign in' : 'Sign up'\r\n\tconst pageDesc = isLogin ? 'Need an account?' : 'Have an account?'\r\n\tconst pageLink = isLogin ? '/register' : '/login'\r\n\r\n\tconst apiUrl = isLogin ? '/users/login' : '/users'\r\n\tconst [{ isLoading, response, error }, doFetch] = useFetch(apiUrl)\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst user = isLogin ? { email, password } : { email, password, username }\r\n\r\n\t\tdoFetch({\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\tuser,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!response) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetToken(response.user.token)\r\n\t\tsetIsSuccessSubmit(true)\r\n\t\tdispatch({ type: 'SET_AUTHORIZED', payload: response.user })\r\n\t\tif (isSuccessSubmit) {\r\n\t\t\treturn navigate('/')\r\n\t\t}\r\n\t}, [response, setToken, navigate, isSuccessSubmit, dispatch])\r\n\r\n\treturn (\r\n\t\t<div className='auth-page'>\r\n\t\t\t<div className='container page'>\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-md-6 offset-md-3 col-xs-12'>\r\n\t\t\t\t\t\t<h1 className='text-center'>{pageTitle}</h1>\r\n\t\t\t\t\t\t<p className='text-center'>\r\n\t\t\t\t\t\t\t<Link to={pageLink}>{pageDesc}</Link>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t{error && <ErrorMessage error={error.errors} />}\r\n\t\t\t\t\t\t\t<fieldset>\r\n\t\t\t\t\t\t\t\t{!isLogin && (\r\n\t\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg mt-3'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Username'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg mt-3'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Email'\r\n\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<fieldset className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg mt-3'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t\t\t<button className='btn btn-primary mt-3' type='submit' disabled={isLoading}>\r\n\t\t\t\t\t\t\t\t\t{pageTitle}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</fieldset>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Auth\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}