{"ast":null,"code":"import _slicedToArray from\"C:/Users/Sinem Morzambak/Desktop/blogApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import ArticleForm from'./components/ArticleForm';import useFetch from'../../hooks/useFetch';import{useNavigate}from'react-router-dom';import{CurrentUserContext}from'../../context/currentUser';import{jsx as _jsx}from\"react/jsx-runtime\";var CreateArticle=function CreateArticle(){var navigate=useNavigate();var apiUrl='/articles';var _useFetch=useFetch(apiUrl),_useFetch2=_slicedToArray(_useFetch,2),_useFetch2$=_useFetch2[0],response=_useFetch2$.response,error=_useFetch2$.error,doFetch=_useFetch2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSuccessSubmit=_useState2[0],setIsSuccessSubmit=_useState2[1];var _useContext=useContext(CurrentUserContext),_useContext2=_slicedToArray(_useContext,1),currentUserState=_useContext2[0];var initialValue={title:'',description:'',body:'',tagList:[]};useEffect(function(){if(currentUserState.isLoggedIn===false){navigate('/');}if(!response){return;}setIsSuccessSubmit(true);if(isSuccessSubmit){navigate(\"/articles/\".concat(response.article.slug));}},[response,isSuccessSubmit,navigate,currentUserState.isLoggedIn]);var handleSubmit=function handleSubmit(article){doFetch({method:'post',data:{article:article}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ArticleForm,{error:error&&error.errors||{},initialValue:initialValue,onSubmit:handleSubmit})});};export default CreateArticle;","map":{"version":3,"names":["React","useContext","useEffect","useState","ArticleForm","useFetch","useNavigate","CurrentUserContext","CreateArticle","navigate","apiUrl","response","error","doFetch","isSuccessSubmit","setIsSuccessSubmit","currentUserState","initialValue","title","description","body","tagList","isLoggedIn","article","slug","handleSubmit","method","data","errors"],"sources":["C:/Users/Sinem Morzambak/Desktop/blogApp/src/pages/acricle/CreateArticle.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport ArticleForm from './components/ArticleForm'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\n\r\nconst CreateArticle = () => {\r\n\tconst navigate = useNavigate()\r\n\tconst apiUrl = '/articles'\r\n\tconst [{ response, error }, doFetch] = useFetch(apiUrl)\r\n\tconst [isSuccessSubmit, setIsSuccessSubmit] = useState(false)\r\n\tconst [currentUserState] = useContext(CurrentUserContext)\r\n\r\n\tconst initialValue = {\r\n\t\ttitle: '',\r\n\t\tdescription: '',\r\n\t\tbody: '',\r\n\t\ttagList: [],\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUserState.isLoggedIn === false) {\r\n\t\t\tnavigate('/')\r\n\t\t}\r\n\t\tif (!response) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsSuccessSubmit(true)\r\n\t\tif (isSuccessSubmit) {\r\n\t\t\tnavigate(`/articles/${response.article.slug}`)\r\n\t\t}\r\n\t}, [response, isSuccessSubmit, navigate, currentUserState.isLoggedIn])\r\n\r\n\tconst handleSubmit = (article) => {\r\n\t\tdoFetch({\r\n\t\t\tmethod: 'post',\r\n\t\t\tdata: {\r\n\t\t\t\tarticle,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ArticleForm error={(error && error.errors) || {}} initialValue={initialValue} onSubmit={handleSubmit} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default CreateArticle\r\n"],"mappings":"8HAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,MAAOC,YAAP,KAAwB,0BAAxB,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,kBAAT,KAAmC,2BAAnC,C,2CAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC3B,GAAMC,SAAQ,CAAGH,WAAW,EAA5B,CACA,GAAMI,OAAM,CAAG,WAAf,CACA,cAAuCL,QAAQ,CAACK,MAAD,CAA/C,kEAASC,QAAT,aAASA,QAAT,CAAmBC,KAAnB,aAAmBA,KAAnB,CAA4BC,OAA5B,eACA,cAA8CV,QAAQ,CAAC,KAAD,CAAtD,wCAAOW,eAAP,eAAwBC,kBAAxB,eACA,gBAA2Bd,UAAU,CAACM,kBAAD,CAArC,4CAAOS,gBAAP,iBAEA,GAAMC,aAAY,CAAG,CACpBC,KAAK,CAAE,EADa,CAEpBC,WAAW,CAAE,EAFO,CAGpBC,IAAI,CAAE,EAHc,CAIpBC,OAAO,CAAE,EAJW,CAArB,CAOAnB,SAAS,CAAC,UAAM,CACf,GAAIc,gBAAgB,CAACM,UAAjB,GAAgC,KAApC,CAA2C,CAC1Cb,QAAQ,CAAC,GAAD,CAAR,CACA,CACD,GAAI,CAACE,QAAL,CAAe,CACd,OACA,CACDI,kBAAkB,CAAC,IAAD,CAAlB,CACA,GAAID,eAAJ,CAAqB,CACpBL,QAAQ,qBAAcE,QAAQ,CAACY,OAAT,CAAiBC,IAA/B,EAAR,CACA,CACD,CAXQ,CAWN,CAACb,QAAD,CAAWG,eAAX,CAA4BL,QAA5B,CAAsCO,gBAAgB,CAACM,UAAvD,CAXM,CAAT,CAaA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACF,OAAD,CAAa,CACjCV,OAAO,CAAC,CACPa,MAAM,CAAE,MADD,CAEPC,IAAI,CAAE,CACLJ,OAAO,CAAPA,OADK,CAFC,CAAD,CAAP,CAMA,CAPD,CASA,mBACC,kCACC,KAAC,WAAD,EAAa,KAAK,CAAGX,KAAK,EAAIA,KAAK,CAACgB,MAAhB,EAA2B,EAA/C,CAAmD,YAAY,CAAEX,YAAjE,CAA+E,QAAQ,CAAEQ,YAAzF,EADD,EADD,CAKA,CAzCD,CA2CA,cAAejB,cAAf"},"metadata":{},"sourceType":"module"}