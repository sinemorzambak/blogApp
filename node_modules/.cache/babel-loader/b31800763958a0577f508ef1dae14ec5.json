{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sinem Morzambak\\\\Desktop\\\\sinem.morzambak\\\\Final-Project\\\\src\\\\pages\\\\acricle\\\\EditArticle.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport useFetch from '../../hooks/useFetch';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ArticleForm from './components/ArticleForm';\nimport { CurrentUserContext } from '../../context/currentUser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditArticle = () => {\n  _s();\n\n  const {\n    slug\n  } = useParams();\n  const apiUrl = `/articles/${slug}`;\n  const navigate = useNavigate();\n  const [isSuccessSubmit, setIsSuccessSubmit] = useState(false);\n  const [{\n    response: updateArticleResponse,\n    error: updateArticleError\n  }, doUpdateArticle] = useFetch(apiUrl);\n  const [{\n    response: fetchArticleResponse\n  }, doFetchArticle] = useFetch(apiUrl);\n  const [currentUserState] = useContext(CurrentUserContext);\n  const [initialValues, setInitialValues] = useState(null);\n\n  const handleSubmit = article => {\n    doUpdateArticle({\n      method: 'put',\n      data: {\n        article\n      }\n    });\n  };\n\n  useEffect(() => {\n    doFetchArticle();\n  }, [doFetchArticle]);\n  useEffect(() => {\n    if (!fetchArticleResponse) {\n      return;\n    }\n\n    setInitialValues({\n      title: fetchArticleResponse.article.title,\n      description: fetchArticleResponse.article.description,\n      body: fetchArticleResponse.article.body,\n      tagList: fetchArticleResponse.article.tagList\n    });\n  }, [fetchArticleResponse]);\n  useEffect(() => {\n    if (!updateArticleResponse) {\n      return;\n    }\n\n    setIsSuccessSubmit(true);\n  }, [updateArticleResponse]);\n  useEffect(() => {\n    if (isSuccessSubmit) {\n      navigate(`/articles/${updateArticleResponse.article.slug}`);\n    }\n\n    if (currentUserState.isLoggedIn === null) {\n      return null;\n    }\n\n    if (currentUserState.isLoggedIn === false) {\n      navigate('/');\n    }\n  }, [navigate, isSuccessSubmit]);\n  return /*#__PURE__*/_jsxDEV(ArticleForm, {\n    onSubmit: handleSubmit,\n    error: updateArticleError && updateArticleError.errors || {},\n    initialValue: initialValues,\n    slug: slug\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 3\n  }, this);\n};\n\n_s(EditArticle, \"TO7YGazUDiUY4Bubph5lDir0HZw=\", false, function () {\n  return [useParams, useNavigate, useFetch, useFetch];\n});\n\n_c = EditArticle;\nexport default EditArticle;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditArticle\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useFetch","useNavigate","useParams","ArticleForm","CurrentUserContext","EditArticle","slug","apiUrl","navigate","isSuccessSubmit","setIsSuccessSubmit","response","updateArticleResponse","error","updateArticleError","doUpdateArticle","fetchArticleResponse","doFetchArticle","currentUserState","initialValues","setInitialValues","handleSubmit","article","method","data","title","description","body","tagList","isLoggedIn","errors"],"sources":["C:/Users/Sinem Morzambak/Desktop/sinem.morzambak/Final-Project/src/pages/acricle/EditArticle.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport useFetch from '../../hooks/useFetch'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport ArticleForm from './components/ArticleForm'\r\nimport { CurrentUserContext } from '../../context/currentUser'\r\n\r\nconst EditArticle = () => {\r\n\tconst { slug } = useParams()\r\n\tconst apiUrl = `/articles/${slug}`\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst [isSuccessSubmit, setIsSuccessSubmit] = useState(false)\r\n\tconst [{ response: updateArticleResponse, error: updateArticleError }, doUpdateArticle] = useFetch(apiUrl)\r\n\tconst [{ response: fetchArticleResponse }, doFetchArticle] = useFetch(apiUrl)\r\n\tconst [currentUserState] = useContext(CurrentUserContext)\r\n\tconst [initialValues, setInitialValues] = useState(null)\r\n\r\n\tconst handleSubmit = (article) => {\r\n\t\tdoUpdateArticle({\r\n\t\t\tmethod: 'put',\r\n\t\t\tdata: {\r\n\t\t\t\tarticle,\r\n\t\t\t},\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdoFetchArticle()\r\n\t}, [doFetchArticle])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!fetchArticleResponse) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetInitialValues({\r\n\t\t\ttitle: fetchArticleResponse.article.title,\r\n\t\t\tdescription: fetchArticleResponse.article.description,\r\n\t\t\tbody: fetchArticleResponse.article.body,\r\n\t\t\ttagList: fetchArticleResponse.article.tagList,\r\n\t\t})\r\n\t}, [fetchArticleResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!updateArticleResponse) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsSuccessSubmit(true)\r\n\t}, [updateArticleResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccessSubmit) {\r\n\t\t\tnavigate(`/articles/${updateArticleResponse.article.slug}`)\r\n\t\t}\r\n\t\tif (currentUserState.isLoggedIn === null) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tif (currentUserState.isLoggedIn === false) {\r\n\t\t\tnavigate('/')\r\n\t\t}\r\n\t}, [navigate, isSuccessSubmit])\r\n\r\n\r\n\treturn (\r\n\t\t<ArticleForm\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t\terror={(updateArticleError && updateArticleError.errors) || {}}\r\n\t\t\tinitialValue={initialValues}\r\n\t\t\tslug={slug}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default EditArticle\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,kBAAvC;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,SAASC,kBAAT,QAAmC,2BAAnC;;;AAEA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EACzB,MAAM;IAAEC;EAAF,IAAWJ,SAAS,EAA1B;EACA,MAAMK,MAAM,GAAI,aAAYD,IAAK,EAAjC;EACA,MAAME,QAAQ,GAAGP,WAAW,EAA5B;EAEA,MAAM,CAACQ,eAAD,EAAkBC,kBAAlB,IAAwCX,QAAQ,CAAC,KAAD,CAAtD;EACA,MAAM,CAAC;IAAEY,QAAQ,EAAEC,qBAAZ;IAAmCC,KAAK,EAAEC;EAA1C,CAAD,EAAiEC,eAAjE,IAAoFf,QAAQ,CAACO,MAAD,CAAlG;EACA,MAAM,CAAC;IAAEI,QAAQ,EAAEK;EAAZ,CAAD,EAAqCC,cAArC,IAAuDjB,QAAQ,CAACO,MAAD,CAArE;EACA,MAAM,CAACW,gBAAD,IAAqBrB,UAAU,CAACO,kBAAD,CAArC;EACA,MAAM,CAACe,aAAD,EAAgBC,gBAAhB,IAAoCrB,QAAQ,CAAC,IAAD,CAAlD;;EAEA,MAAMsB,YAAY,GAAIC,OAAD,IAAa;IACjCP,eAAe,CAAC;MACfQ,MAAM,EAAE,KADO;MAEfC,IAAI,EAAE;QACLF;MADK;IAFS,CAAD,CAAf;EAMA,CAPD;;EASAxB,SAAS,CAAC,MAAM;IACfmB,cAAc;EACd,CAFQ,EAEN,CAACA,cAAD,CAFM,CAAT;EAIAnB,SAAS,CAAC,MAAM;IACf,IAAI,CAACkB,oBAAL,EAA2B;MAC1B;IACA;;IAEDI,gBAAgB,CAAC;MAChBK,KAAK,EAAET,oBAAoB,CAACM,OAArB,CAA6BG,KADpB;MAEhBC,WAAW,EAAEV,oBAAoB,CAACM,OAArB,CAA6BI,WAF1B;MAGhBC,IAAI,EAAEX,oBAAoB,CAACM,OAArB,CAA6BK,IAHnB;MAIhBC,OAAO,EAAEZ,oBAAoB,CAACM,OAArB,CAA6BM;IAJtB,CAAD,CAAhB;EAMA,CAXQ,EAWN,CAACZ,oBAAD,CAXM,CAAT;EAaAlB,SAAS,CAAC,MAAM;IACf,IAAI,CAACc,qBAAL,EAA4B;MAC3B;IACA;;IACDF,kBAAkB,CAAC,IAAD,CAAlB;EACA,CALQ,EAKN,CAACE,qBAAD,CALM,CAAT;EAOAd,SAAS,CAAC,MAAM;IACf,IAAIW,eAAJ,EAAqB;MACpBD,QAAQ,CAAE,aAAYI,qBAAqB,CAACU,OAAtB,CAA8BhB,IAAK,EAAjD,CAAR;IACA;;IACD,IAAIY,gBAAgB,CAACW,UAAjB,KAAgC,IAApC,EAA0C;MACzC,OAAO,IAAP;IACA;;IACD,IAAIX,gBAAgB,CAACW,UAAjB,KAAgC,KAApC,EAA2C;MAC1CrB,QAAQ,CAAC,GAAD,CAAR;IACA;EACD,CAVQ,EAUN,CAACA,QAAD,EAAWC,eAAX,CAVM,CAAT;EAaA,oBACC,QAAC,WAAD;IACC,QAAQ,EAAEY,YADX;IAEC,KAAK,EAAGP,kBAAkB,IAAIA,kBAAkB,CAACgB,MAA1C,IAAqD,EAF7D;IAGC,YAAY,EAAEX,aAHf;IAIC,IAAI,EAAEb;EAJP;IAAA;IAAA;IAAA;EAAA,QADD;AAQA,CAjED;;GAAMD,W;UACYH,S,EAEAD,W,EAGyED,Q,EAC7BA,Q;;;KAPxDK,W;AAmEN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}