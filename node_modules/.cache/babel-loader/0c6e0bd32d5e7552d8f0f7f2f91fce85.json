{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport useStorage from './useStorage';\n\nconst useFetch = url => {\n  _s();\n\n  const baseUrl = 'https://api.realworld.io/api';\n  const [isLoading, setIsLoading] = useState(false);\n  const [response, setResponse] = useState(null);\n  const [error, setError] = useState(null);\n  const [options, setOptions] = useState({});\n  const [token] = useStorage('token');\n  const doFetch = useCallback(options => {\n    setOptions(options);\n    setIsLoading(true);\n  }, []);\n  useEffect(() => {\n    let skipGetResponseAfterDie = false;\n    const requestOptions = { ...options,\n      ...{\n        headers: {\n          authorization: token ? `Token ${token}` : ''\n        }\n      }\n    };\n\n    if (!isLoading) {\n      return;\n    }\n\n    axios(baseUrl + url, requestOptions).then(res => {\n      if (!skipGetResponseAfterDie) {\n        setIsLoading(false);\n        setResponse(res.data);\n      }\n    }).catch(error => {\n      if (!skipGetResponseAfterDie) {\n        setIsLoading(false);\n        setError(error.response.data);\n      }\n    });\n    return () => {\n      skipGetResponseAfterDie = true;\n    };\n  }, [isLoading, options, token, url]);\n  return [{\n    isLoading,\n    response,\n    error\n  }, doFetch];\n};\n\n_s(useFetch, \"lnZtRA3V2/co8cQ3HJ8BK+jqzFs=\", false, function () {\n  return [useStorage];\n});\n\nexport default useFetch;","map":{"version":3,"names":["useCallback","useEffect","useState","axios","useStorage","useFetch","url","baseUrl","isLoading","setIsLoading","response","setResponse","error","setError","options","setOptions","token","doFetch","skipGetResponseAfterDie","requestOptions","headers","authorization","then","res","data","catch"],"sources":["C:/Users/Sinem Morzambak/Desktop/blogApp/src/hooks/useFetch.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport useStorage from './useStorage'\r\n\r\nconst useFetch = (url) => {\r\n\tconst baseUrl = 'https://api.realworld.io/api'\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [response, setResponse] = useState(null)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [options, setOptions] = useState({})\r\n\tconst [token] = useStorage('token')\r\n\r\n\tconst doFetch = useCallback((options) => {\r\n\t\tsetOptions(options)\r\n\t\tsetIsLoading(true)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet skipGetResponseAfterDie = false\r\n\t\tconst requestOptions = {\r\n\t\t\t...options,\r\n\t\t\t...{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tauthorization: token ? `Token ${token}` : '',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t}\r\n\t\tif (!isLoading) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\taxios(baseUrl + url, requestOptions)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (!skipGetResponseAfterDie) {\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\tsetResponse(res.data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tif (!skipGetResponseAfterDie) {\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\tsetError(error.response.data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tskipGetResponseAfterDie = true\r\n\t\t}\r\n\t}, [isLoading, options, token, url])\r\n\r\n\treturn [{ isLoading, response, error }, doFetch]\r\n}\r\n\r\nexport default useFetch\r\n"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;;AAEA,MAAMC,QAAQ,GAAIC,GAAD,IAAS;EAAA;;EACzB,MAAMC,OAAO,GAAG,8BAAhB;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACc,KAAD,IAAUZ,UAAU,CAAC,OAAD,CAA1B;EAEA,MAAMa,OAAO,GAAGjB,WAAW,CAAEc,OAAD,IAAa;IACxCC,UAAU,CAACD,OAAD,CAAV;IACAL,YAAY,CAAC,IAAD,CAAZ;EACA,CAH0B,EAGxB,EAHwB,CAA3B;EAKAR,SAAS,CAAC,MAAM;IACf,IAAIiB,uBAAuB,GAAG,KAA9B;IACA,MAAMC,cAAc,GAAG,EACtB,GAAGL,OADmB;MAEtB,GAAG;QACFM,OAAO,EAAE;UACRC,aAAa,EAAEL,KAAK,GAAI,SAAQA,KAAM,EAAlB,GAAsB;QADlC;MADP;IAFmB,CAAvB;;IAQA,IAAI,CAACR,SAAL,EAAgB;MACf;IACA;;IACDL,KAAK,CAACI,OAAO,GAAGD,GAAX,EAAgBa,cAAhB,CAAL,CACEG,IADF,CACQC,GAAD,IAAS;MACd,IAAI,CAACL,uBAAL,EAA8B;QAC7BT,YAAY,CAAC,KAAD,CAAZ;QACAE,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX;MACA;IACD,CANF,EAOEC,KAPF,CAOSb,KAAD,IAAW;MACjB,IAAI,CAACM,uBAAL,EAA8B;QAC7BT,YAAY,CAAC,KAAD,CAAZ;QACAI,QAAQ,CAACD,KAAK,CAACF,QAAN,CAAec,IAAhB,CAAR;MACA;IACD,CAZF;IAcA,OAAO,MAAM;MACZN,uBAAuB,GAAG,IAA1B;IACA,CAFD;EAGA,CA9BQ,EA8BN,CAACV,SAAD,EAAYM,OAAZ,EAAqBE,KAArB,EAA4BV,GAA5B,CA9BM,CAAT;EAgCA,OAAO,CAAC;IAAEE,SAAF;IAAaE,QAAb;IAAuBE;EAAvB,CAAD,EAAiCK,OAAjC,CAAP;AACA,CA9CD;;GAAMZ,Q;UAMWD,U;;;AA0CjB,eAAeC,QAAf"},"metadata":{},"sourceType":"module"}