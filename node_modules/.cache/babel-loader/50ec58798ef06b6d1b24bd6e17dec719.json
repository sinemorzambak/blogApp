{"ast":null,"code":"import _objectSpread from\"C:/Users/Sinem Morzambak/Desktop/blogApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Sinem Morzambak/Desktop/blogApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useState}from'react';import axios from'axios';import useStorage from'./useStorage';var useFetch=function useFetch(url){var baseUrl='https://api.realworld.io/api';var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),response=_useState4[0],setResponse=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];var _useStorage=useStorage('token'),_useStorage2=_slicedToArray(_useStorage,1),token=_useStorage2[0];var doFetch=useCallback(function(options){setOptions(options);setIsLoading(true);},[]);useEffect(function(){var skipGetResponseAfterDie=false;var requestOptions=_objectSpread(_objectSpread({},options),{headers:{authorization:token?\"Token \".concat(token):''}});if(!isLoading){return;}axios(baseUrl+url,requestOptions).then(function(res){if(!skipGetResponseAfterDie){setIsLoading(false);setResponse(res.data);}}).catch(function(error){if(!skipGetResponseAfterDie){setIsLoading(false);setError(error.response.data);}});return function(){skipGetResponseAfterDie=true;};},[isLoading,options,token,url]);return[{isLoading:isLoading,response:response,error:error},doFetch];};export default useFetch;","map":{"version":3,"names":["useCallback","useEffect","useState","axios","useStorage","useFetch","url","baseUrl","isLoading","setIsLoading","response","setResponse","error","setError","options","setOptions","token","doFetch","skipGetResponseAfterDie","requestOptions","headers","authorization","then","res","data","catch"],"sources":["C:/Users/Sinem Morzambak/Desktop/blogApp/src/hooks/useFetch.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport useStorage from './useStorage'\r\n\r\nconst useFetch = (url) => {\r\n\tconst baseUrl = 'https://api.realworld.io/api'\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [response, setResponse] = useState(null)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [options, setOptions] = useState({})\r\n\tconst [token] = useStorage('token')\r\n\r\n\tconst doFetch = useCallback((options) => {\r\n\t\tsetOptions(options)\r\n\t\tsetIsLoading(true)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet skipGetResponseAfterDie = false\r\n\t\tconst requestOptions = {\r\n\t\t\t...options,\r\n\t\t\t...{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tauthorization: token ? `Token ${token}` : '',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t}\r\n\t\tif (!isLoading) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\taxios(baseUrl + url, requestOptions)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (!skipGetResponseAfterDie) {\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\tsetResponse(res.data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tif (!skipGetResponseAfterDie) {\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t\tsetError(error.response.data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tskipGetResponseAfterDie = true\r\n\t\t}\r\n\t}, [isLoading, options, token, url])\r\n\r\n\treturn [{ isLoading, response, error }, doFetch]\r\n}\r\n\r\nexport default useFetch\r\n"],"mappings":"2PAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,QAAjC,KAAiD,OAAjD,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,WAAP,KAAuB,cAAvB,CAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,GAAD,CAAS,CACzB,GAAMC,QAAO,CAAG,8BAAhB,CACA,cAAkCL,QAAQ,CAAC,KAAD,CAA1C,wCAAOM,SAAP,eAAkBC,YAAlB,eACA,eAAgCP,QAAQ,CAAC,IAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA0BT,QAAQ,CAAC,IAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eACA,eAA8BX,QAAQ,CAAC,EAAD,CAAtC,yCAAOY,OAAP,eAAgBC,UAAhB,eACA,gBAAgBX,UAAU,CAAC,OAAD,CAA1B,4CAAOY,KAAP,iBAEA,GAAMC,QAAO,CAAGjB,WAAW,CAAC,SAACc,OAAD,CAAa,CACxCC,UAAU,CAACD,OAAD,CAAV,CACAL,YAAY,CAAC,IAAD,CAAZ,CACA,CAH0B,CAGxB,EAHwB,CAA3B,CAKAR,SAAS,CAAC,UAAM,CACf,GAAIiB,wBAAuB,CAAG,KAA9B,CACA,GAAMC,eAAc,gCAChBL,OADgB,EAEhB,CACFM,OAAO,CAAE,CACRC,aAAa,CAAEL,KAAK,iBAAYA,KAAZ,EAAsB,EADlC,CADP,CAFgB,CAApB,CAQA,GAAI,CAACR,SAAL,CAAgB,CACf,OACA,CACDL,KAAK,CAACI,OAAO,CAAGD,GAAX,CAAgBa,cAAhB,CAAL,CACEG,IADF,CACO,SAACC,GAAD,CAAS,CACd,GAAI,CAACL,uBAAL,CAA8B,CAC7BT,YAAY,CAAC,KAAD,CAAZ,CACAE,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX,CACA,CACD,CANF,EAOEC,KAPF,CAOQ,SAACb,KAAD,CAAW,CACjB,GAAI,CAACM,uBAAL,CAA8B,CAC7BT,YAAY,CAAC,KAAD,CAAZ,CACAI,QAAQ,CAACD,KAAK,CAACF,QAAN,CAAec,IAAhB,CAAR,CACA,CACD,CAZF,EAcA,MAAO,WAAM,CACZN,uBAAuB,CAAG,IAA1B,CACA,CAFD,CAGA,CA9BQ,CA8BN,CAACV,SAAD,CAAYM,OAAZ,CAAqBE,KAArB,CAA4BV,GAA5B,CA9BM,CAAT,CAgCA,MAAO,CAAC,CAAEE,SAAS,CAATA,SAAF,CAAaE,QAAQ,CAARA,QAAb,CAAuBE,KAAK,CAALA,KAAvB,CAAD,CAAiCK,OAAjC,CAAP,CACA,CA9CD,CAgDA,cAAeZ,SAAf"},"metadata":{},"sourceType":"module"}